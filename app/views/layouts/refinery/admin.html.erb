<!DOCTYPE html>
<!-- DOCUMENTATION

html
  head
    glass/head
    glass/stylesheets
  /head
  body
    sidebar-left (main admin nav)
    sidebar-right
    page-preview OR admin_content [OR legacy admin content]
      _body partial (shared)
        header (main nav)
        content
        footer
      /_body partial
    /page-preview
    modal wrapper
    glass/javascripts
  /body
/html

html
  head
    glass/head
    glass/stylesheets
  /head
  body
    _body partial (shared)
    glass/javascripts
  /body
/html
-->
<% is_admin_preview_page =  content_for?(:admin_page_preview) %>

<%= render '/refinery/html_tag' %>
  <% content_for :meta, "<meta refinerycms='#{Refinery.version}' />".html_safe %>
  <head>
    <%= render partial: '/glass/head',        locals: {admin: true} %>
    <%= render partial: '/glass/stylesheets', locals: {admin: true} %>
  </head>

  <body class="<%= action_name %> <%= I18n.locale %> <%= 'small-sidebar' unless is_admin_preview_page %>">
    <section id="sidebar-left" class="ui sidebar left overlay">
      <div class="sidebar-top-nav site-name">
        <a href="" class="sidebar-left-opener menu-link menu-link-left"><i class="gcicon gcicon-cancel"></i></a> <i class="gcicon gcicon-glass-canvas hidden"></i> <%= link_to Refinery::Core.site_name, '/' %>
      </div>
      <div id="sidebar-left-inner">
        <%= render 'refinery/admin/menu' %>
      </div>
      <%= link_to (t('.log_out', site_bar_translate_locale_args) + ' <i class="gcicon gcicon-log-out"></i>').html_safe,
                  refinery.logout_path, :id => 'logout', :class => 'log-out' %>
    </section>
    
    <% if content_for?(:admin_sidebar) %>
      <section id="sidebar-right" class="ui sidebar overlay right">
        <div class="sidebar-top-nav">
           <span>Publish Settings</span> <a href="" class="sidebar-right-opener menu-link menu-link-right"><i class="gcicon gcicon-cancel"></i></a>
        </div>
        <div id="sidebar-right-inner">
          <%= yield :admin_sidebar %>
        </div>
      </section>
    <% end %>

    <section id="wrapper" class="pusher">
      <a href="" class="sidebar-left-opener menu-link menu-link-left"><i class="gcicon gcicon-bars"></i></a>
      <% if content_for?(:admin_sidebar) %>
        <a href="" class="sidebar-right-opener menu-link menu-link-right"><i class="gcicon gcicon-publish"></i></a>
      <% end %>
      
      <div id="flash_container" class="container-fluid">
        <div class="row">
          <div class="col-sm-12">
            <%= render '/refinery/no_script' %>
            <%= render '/refinery/message' %>
          </div>
        </div>
      </div>

      <% if is_admin_preview_page %>
        <section id="page-preview">
          <!-- this partial yields to :admin_page_preview -->
          <%= render partial: '/glass/body', locals: {admin: true} %>
        </section>
      <% elsif content_for?(:admin_content) %>
        <%= yield :admin_content %>
      <% else %>
        <div class="container admin-page">
          <div class="row">
            <div class="col-sm-12">
              <%= yield %>
            </div>
          </div>
        </div>
      <% end %>

      <%= render 'refinery/admin/glass/modal' %>
    </section>
    
    <%= render partial: '/glass/javascripts', locals: {admin: true} %>
  </body>
</html>
